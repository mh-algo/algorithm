import sys
input = sys.stdin.readline
n, m = map(int, input().split())
paper = [[a for a in map(int, input().split())] for _ in range(n)]
'''
shape 좌표
(-1,-1) (-1,0) (-1,1)
(0,-1)  (0,0)  (0,1)
(1,-1)  (1,0)  (1,1)
'''
shape = [
    # ㅣ 모양
    [
        ((0,0), (1,0), (2,0), (3,0)),    # ㅣ
        ((0,0), (0,1), (0,2), (0,3))     # ㅡ
    ],
    # ㅁ 모양
    [
        ((0,0), (0,1), (1,0), (1,1))
    ],
    # ㄴ 모양
    [
        ((1,0), (1,-1), (0,-1), (-1,-1)),
        ((0,-1), (-1,-1), (-1,0), (-1,1)),
        ((-1,0), (-1,1), (0,1), (1,1)),
        ((0,1), (1,1), (1,0), (1,-1)),

        ((1,0), (1,1), (0,1), (-1,1)),
        ((0,-1),(1,-1),(1,0), (1,1)),
        ((-1,0), (-1,-1), (0,-1),(1,-1)),
        ((0,1), (-1,1), (-1,0), (-1,-1))
    ],
    # ㄹ 모양
    [
        ((-1,-1), (0,-1), (0,0), (1,0)),
        ((0,-1), (0,0), (-1,0), (-1,1)),
        ((1,-1), (0,-1), (0,0), (-1,0)),
        ((-1,-1), (-1,0), (0,0), (0,1))
    ],
    # ㅗ 모양
    [
        ((0,0), (-1,-1), (-1,0), (-1,1)),  # ㅜ
        ((0,0), (1,-1), (1,0), (1,1)),     # ㅗ
        ((0,0), (-1,-1), (0,-1), (1,-1)),  # ㅏ
        ((0,0), (-1,1), (0,1), (1,1))      # ㅓ
    ]
]
max_value = 0
for i in range(n):
    for j in range(m):
        for kind in shape:
            for location in kind:
                total = 0
                for y, x in location:
                    ny, nx = i+y, j+x
                    if 0 <= ny < n and 0 <= nx < m:
                        total += paper[ny][nx]
                    else:
                        total = 0
                        break
                max_value = max(max_value, total)
print(max_value)